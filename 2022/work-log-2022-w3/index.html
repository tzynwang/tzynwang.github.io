<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.BScVxmeO.js"></script><!-- Google Tag Manager --><script>(function(){const ga4Id = "G-6QC9CKHCTY";

      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', ga4Id);
    })();</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=GTM-KM9SGJLK">(function(){const gTagId = "GTM-KM9SGJLK";
})();</script><script>(function(){const ga4Id = "G-6QC9CKHCTY";

      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', ga4Id);
    })();</script><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¦Š</text></svg>"><link rel="sitemap" href="/sitemap-index.xml"><meta name="generator" content="Astro v5.1.2"><!-- Primary Meta Tags --><title>2022 ç¬¬3é€± å­¸ç¿’è¨˜éŒ„ï¼šCreational Design Patterns</title><meta name="title" content="2022 ç¬¬3é€± å­¸ç¿’è¨˜éŒ„ï¼šCreational Design Patterns"><meta name="description" content="é€™æ˜¯ä¸€å€‹æ–‡çµ„è½‰è·å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€è¡“éƒ¨è½æ ¼"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://tzynwang.github.io/2022/work-log-2022-w3"><meta property="og:title" content="2022 ç¬¬3é€± å­¸ç¿’è¨˜éŒ„ï¼šCreational Design Patterns"><meta property="og:description" content="é€™æ˜¯ä¸€å€‹æ–‡çµ„è½‰è·å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€è¡“éƒ¨è½æ ¼"><meta property="og:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://tzynwang.github.io/2022/work-log-2022-w3"><meta property="twitter:title" content="2022 ç¬¬3é€± å­¸ç¿’è¨˜éŒ„ï¼šCreational Design Patterns"><meta property="twitter:description" content="é€™æ˜¯ä¸€å€‹æ–‡çµ„è½‰è·å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€è¡“éƒ¨è½æ ¼"><meta property="twitter:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg"><!-- Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet"><style>.tag[data-astro-cid-2iymvi75]{position:relative;display:inline-flex;align-items:center;padding:2px 8px;font-size:14px;font-weight:400;text-decoration:none;background-color:#8aa6a3;color:#fff;transition:background-color .2s ease-in-out}.tag[data-astro-cid-2iymvi75]:not(:last-of-type){margin-right:8px}.tag[data-astro-cid-2iymvi75]:hover{background-color:#127369}
.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}.footer[data-astro-cid-qlgq3onj]{padding:36px;text-align:center}.bottom[data-astro-cid-qlgq3onj]{position:absolute;bottom:0;left:50%;transform:translate(-50%)}.side-content[data-astro-cid-75hifxor],.main-content[data-astro-cid-75hifxor]{margin:24px}nav[data-astro-cid-75hifxor]{display:flex;gap:16px}@media screen and (min-width: 800px){body{height:100vh;display:flex;flex-direction:row;overflow-y:hidden}nav[data-astro-cid-75hifxor]{flex-direction:column}.side-content[data-astro-cid-75hifxor]{flex:0 0 240px}.main-content[data-astro-cid-75hifxor]{margin:0;padding:40px 24px 0;flex:1 1 auto;overflow-y:auto;position:relative}}*{margin:0;padding:0;box-sizing:content-box;font-family:sans-serif;text-wrap:pretty;color:#000000e6}html{background-color:#bfbfbf66}a{color:#127369;font-weight:700;text-decoration:underline;text-decoration-color:transparent;transition:text-decoration-color .2s ease-in-out}a:hover{text-decoration-color:#127369}a.link-out{position:absolute;inset:0}ul,li{list-style-position:inside}ul:not(:has(li)){margin-top:16px;margin-bottom:16px}li{margin-top:4px;margin-bottom:4px;line-height:24px}li li{padding-left:16px}img{display:block;max-width:100%}h1,h2{font-size:28px;line-height:42px;margin:16px 0;color:#4c5958}h3,h4{font-size:22px;line-height:34px;margin:16px 0;color:#4c5958}h5{font-size:18px;line-height:28px;margin:4px 0;color:#4c5958}p{font-size:16px;line-height:24px;margin:16px 0}p code{font-size:14px}blockquote{padding-left:16px;border-left:4px solid #4c5958}blockquote *{font-family:Noto Sans,sans-serif}pre{padding:8px 16px}code,code span{font-family:monospace}hr{width:100%;height:1px;margin:16px 0;background-color:#4c5958}del{color:#4c5958e6}ol>li:has(p)>p{display:inline;margin:0}
.post-container[data-astro-cid-qtokga5y] h1[data-astro-cid-qtokga5y]{margin:0 0 16px}.info[data-astro-cid-qtokga5y]{display:flex;flex-direction:column;gap:8px}.toc-container[data-astro-cid-qtokga5y]{margin-bottom:0}.toc-container[data-astro-cid-qtokga5y]>li[data-astro-cid-qtokga5y]:not(:last-of-type){margin-bottom:4px}.toc-2[data-astro-cid-qtokga5y]{margin-left:1rem}.toc-3[data-astro-cid-qtokga5y]{margin-left:2rem}.toc-4[data-astro-cid-qtokga5y]{margin-left:3rem}.toc-5[data-astro-cid-qtokga5y]{margin-left:4rem}@media screen and (min-width: 800px){.post-container[data-astro-cid-qtokga5y]{max-width:600px}}@media screen and (min-width: 1200px){.post-container[data-astro-cid-qtokga5y]{max-width:720px}}
[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style></head> <body> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KM9SGJLK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!-- End Google Tag Manager (noscript) --> <section class="side-content" data-astro-cid-75hifxor> <h1 data-astro-cid-75hifxor>æ™®é€šæ–‡çµ„ 2.0</h1> <nav data-astro-cid-75hifxor> <a href="/" data-astro-cid-75hifxor>é¦–é </a> <a href="/archive" data-astro-cid-75hifxor>å…¨æ–‡ç« æ­¸æª”</a> <a href="/tag" data-astro-cid-75hifxor>ä»¥æ¨™ç±¤æª¢è¦–</a> <a href="/rss.xml" data-astro-cid-75hifxor>RSS</a> </nav> </section> <section class="main-content" data-astro-cid-75hifxor>   <div class="post-container" data-astro-cid-qtokga5y> <h1 data-astro-cid-qtokga5y>2022 ç¬¬3é€± å­¸ç¿’è¨˜éŒ„ï¼šCreational Design Patterns</h1> <div class="info" data-astro-cid-qtokga5y> <span data-astro-cid-qtokga5y>2022-01-22 17:39</span> <span data-astro-cid-qtokga5y><a class="tag" href="/tag/Design Patterns" data-astro-cid-2iymvi75> Design Patterns </a> </span> <ul class="toc-container" data-astro-cid-qtokga5y> <li class="toc-2" data-astro-cid-qtokga5y> <a href="#ç¸½çµ" data-astro-cid-qtokga5y>ç¸½çµ</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#ç­†è¨˜" data-astro-cid-qtokga5y>ç­†è¨˜</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#factory-method" data-astro-cid-qtokga5y>Factory Method</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#abstract-factory" data-astro-cid-qtokga5y>Abstract Factory</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#builder" data-astro-cid-qtokga5y>Builder</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#prototype" data-astro-cid-qtokga5y>Prototype</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#singleton" data-astro-cid-qtokga5y>Singleton</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#åƒè€ƒæ–‡ä»¶" data-astro-cid-qtokga5y>åƒè€ƒæ–‡ä»¶</a> </li> </ul> </div> <h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>æœ¬ç¯‡æ•´ç†äº† design patterns ä¸­æ­¸é¡ç‚º creational design patterns çš„ç›¸é—œç­†è¨˜ï¼š</p>
<ul>
<li>Factory Method</li>
<li>Abstract Factory</li>
<li>Builder</li>
<li>Prototype</li>
<li>Singleton</li>
</ul>
<p>Creational patterns çš„é—œæ³¨é»ï¼šprovide various object <strong>creation mechanisms</strong>, which increase <strong>flexibility</strong> and <strong>reuse</strong> of existing code. è‘—çœ¼é»åœ¨ã€Œç‰©ä»¶æ‡‰è©²å¦‚ä½•è¢«å»ºç«‹ã€çš„ design patterns</p>
<h2 id="ç­†è¨˜">ç­†è¨˜</h2>
<h3 id="factory-method">Factory Method</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/EcFVTgRHJLM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<ul>
<li>Provides an interface for <strong>creating objects in a superclass</strong>, but allows <strong>subclasses to alter the type of objects</strong> that will be created. ç”± superclass å®šç¾©å¥½ interfaceï¼Œç”± subclass ä¾†å¯¦éš›é€²è¡Œç‰©ä»¶çš„å»ºç«‹èˆ‡å›å‚³</li>
<li>The Factory Method <strong>separates product construction</strong> code from the code that <strong>actually uses the product</strong>. For example, <strong>to add a new product</strong> type to the app, youâ€™ll only need to <strong>create a new creator subclass</strong> and override the factory method in it.</li>
<li>Use the Factory Method <strong>when you donâ€™t know beforehand the exact types and dependencies of the objects</strong> your code should work with. ç”± factory method ä¾†æ ¹æ“šæƒ…å¢ƒå›å‚³å°æ‡‰çš„ç‰©ä»¶</li>
<li>Using factories provides encapsulation, and means the <strong>code is not tied to specific classes or objects</strong>, and thus the class hierarchy or prototypes can be changed or refactored <strong>without needing to change code that uses them</strong>. ä¸éœ€è¦çŸ¥é“ç‰©ä»¶æ˜¯æ ¹æ“šä»€éº¼æ¨£çš„é‚è¼¯æˆ–æ­¥é©Ÿè¢«å»ºç«‹ï¼Œåªè¦å‘¼å« subclass å°±å¯ä»¥å¾—åˆ°éœ€è¦çš„ç‰©ä»¶</li>
</ul>
<script src="https://gist.github.com/tzynwang/cd786a10bedf28a61043a8923ce0fdd6.js"></script>
<ul>
<li>gist/app.tsx ç¬¬ 22 è¡Œçš„ <code>generateRandomAnimal.runFactory()</code>ï¼Œé‹ç”¨é€™æ®µ code çš„äººä¸éœ€è¦çŸ¥é“ Animal æ˜¯æ ¹æ“šä»€éº¼æ¨£çš„é‚è¼¯è¢«éš¨æ©Ÿç”¢å‡ºï¼ŒåªçŸ¥é“ä¸€æ—¦å‘¼å«äº† <code>generateRandomAnimal.runFactory()</code> å°±æœƒå¾—åˆ°éš¨æ©Ÿçš„ Animal ç‰©ä»¶</li>
<li>gist/app.tsx ç¬¬ 26 è¡Œçš„ <code>generateSerialAnimal.runFactory()</code> å‰‡æ˜¯æœƒä»¥å›ºå®šçš„é †åºå›å‚³ Animal ç‰©ä»¶ï¼Œä½¿ç”¨é€™æ®µ code çš„äººä¹Ÿä¸éœ€è¦çŸ¥é“ Animal æ˜¯é€éå“ªäº›é‚è¼¯è¢«ä¾åºç”¢å‡º</li>
<li>ä½¿ç”¨ <code>runFactory()</code>ï¼ˆå³ <code>factory method</code>ï¼‰çš„å¥½è™•æ˜¯ï¼Œæ—¥å¾Œ Animal çš„ç¨®é¡å°±ç®—è¶Šè®Šè¶Šå¤šï¼Œä½¿ç”¨è€…ç¶­æŒä½¿ç”¨ <code>generateRandomAnimal.runFactory()</code> ä¾èˆŠå¯ä»¥éš¨æ©Ÿç²å¾—ä»»ä½• Animal ç‰©ä»¶ï¼Œclient code ä¸éœ€é€²è¡Œä»»ä½•èª¿æ•´</li>
</ul>
<h3 id="abstract-factory">Abstract Factory</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/v-GiuMmsXj4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<ul>
<li>èˆ‡ Factory Method æ¦‚å¿µé¡ä¼¼ï¼Œå”¯ä¸€çš„ä¸åŒæ˜¯ Factory Method åŸºæœ¬ä¸Šæ˜¯ç”¢ç”Ÿå–®ä¸€ç‰©ä»¶ï¼Œä½† Abstract Factory æ˜¯ç”¢å‡ºä¸€çµ„äº’ç›¸æ­é…çš„ç‰©ä»¶ï¼Œæ¯”å¦‚åœ¨ light mode æˆ– dark mode ä¸‹ä½¿ç”¨çš„ä¸åŒ UI çµ„åˆ</li>
<li>Abstract Factory è¦è§£æ±ºçš„å•é¡Œæ˜¯ï¼šç¢ºä¿ç”¢å‡ºçš„ç‰©ä»¶æœƒæ˜¯åˆç†çš„çµ„åˆ</li>
<li>Abstract Factory can serve as <strong>an alternative to Facade</strong> when you only want to hide the way the subsystem objects are created from the client code.</li>
</ul>
<h3 id="builder">Builder</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ziQqmvfg5XE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<ul>
<li>ä½¿ç”¨ä¸€é€£ä¸²çš„ method ä¾†ç”¢ç”Ÿç‰©ä»¶ï¼›èˆ‰ä¾‹ï¼šé€éåœ¨æŠ«è–©ä¸Šè¿½åŠ ä¸åŒçš„é…æ–™ï¼ˆ<code>methods</code>ï¼‰ï¼Œæœƒç”¢ç”Ÿä¸åŒå£å‘³çš„æŠ«è–©</li>
<li>Builder focuses on <strong>constructing complex objects step by step</strong>. Abstract Factory specializes in creating <strong>families of related objects</strong>.</li>
<li>Abstract Factory returns the product immediately, whereas <strong>Builder lets you run some additional construction steps before fetching the product</strong>.</li>
</ul>
<script src="https://gist.github.com/tzynwang/ced5f0ff99570ac61580481dae622b46.js"></script>
<ul>
<li>gist/builder.ts ç¬¬ 50 è‡³ 52 è¡Œå³ç¤ºç¯„ builder pattern çš„ç‰¹å¾µï¼šé€éä¸€ç³»åˆ—çš„ steps ä¾†å»ºæ§‹é¡ä¼¼ä½†ç´°ç¯€ä¸åŒçš„ç‰©ä»¶</li>
</ul>
<h3 id="prototype">Prototype</h3>
<ul>
<li>Prototype can help when you need to <strong>save copies of Commands into history</strong>.</li>
<li>Sometimes Prototype can be a <strong>simpler alternative to Memento</strong>. This works if the object, the state of which you want to store in the history, is fairly straightforward and doesnâ€™t have links to external resources, or the links are easy to re-establish.</li>
</ul>
<script src="https://gist.github.com/tzynwang/cdfd010f777a9394e21ac2f9378e4447.js"></script>
<ul>
<li>gist/prototype.ts èˆ‡ gist/builder.ts çš„å·®ç•°åœ¨æ–¼ä½¿ç”¨ <code>.clone()</code> è¤‡è£½ <code>Pizza</code> ç‰©ä»¶ç•¶ä¸‹çš„ç‹€æ…‹ï¼Œä¸¦ä¿®æ”¹ clone å›å‚³å‡ºä¾†çš„ <code>Pizza</code> ç‰©ä»¶ï¼›é€é <code>.listPizzaSpec()</code> å¯ä»¥ç™¼ç¾ä¿®æ”¹ <code>.clone()</code> å¾Œçš„æ–° <code>Pizza</code> ä¸æœƒå½±éŸ¿åˆ°è¢«ç•¶ä½œè¤‡è£½å°è±¡çš„åŸå§‹ <code>Pizza</code></li>
</ul>
<h3 id="singleton">Singleton</h3>
<ul>
<li>Singleton is a creational design pattern that lets you ensure that a class <strong>has only one instance</strong>, while <strong>providing a global access point</strong> to this instance. å¯¦ä½œéçš„ä¾‹å­ï¼šæ¨ç‰¹å°ˆæ¡ˆä¸­å”¯ä¸€ä¸€å€‹ web socket instanceï¼Œç¢ºä¿æ¨ç‰¹å°ˆæ¡ˆåœ¨é–‹å•Ÿçš„æ™‚å€™æ°¸é åªæœƒæœ‰ä¸€å€‹ web socket instance åœ¨é€£ç·šï¼Œé¿å…å‡ºç¾ä½¿ç”¨è€…é‡è¤‡é€²å‡ºèŠå¤©å®¤çš„éŒ¯èª¤</li>
<li>æ³¨æ„ redux ä¸¦ä¸ç­‰æ–¼ singleton patternï¼Œè€Œæ˜¯ä½¿ç”¨è€…é¸æ“‡åªç¶­è­·ä¸€å€‹å”¯ä¸€å¯¦ä¾‹ï¼Œé€™æ‰è®“ redux ä¿ç®¡çš„è³‡æ–™æ“æœ‰ singleton çš„ç‰¹æ€§</li>
<li>Implementation:
<ul>
<li>Make the default <code>constructor</code> <strong>private</strong>, to prevent other objects from using the new operator with the Singleton class.</li>
</ul>
</li>
<li>Create a static creation method that acts as a constructor. Under the hood, <strong>this method calls the private constructor to create an object</strong> and saves it in a static field. All following calls to this method <strong>return the cached object</strong>.</li>
</ul>
<h2 id="åƒè€ƒæ–‡ä»¶">åƒè€ƒæ–‡ä»¶</h2>
<ul>
<li><a href="https://refactoring.guru/design-patterns/creational-patterns">Refactoring.Guru: Creational Design Patterns</a></li>
<li><a href="https://www.dofactory.com/javascript/design-patterns">dofactory: JavaScript Design Patterns</a></li>
<li><a href="https://www.patterns.dev/posts/introduction/">patterns</a></li>
</ul> </div>   <footer class="footer" data-astro-cid-qlgq3onj>
Tzu Yin (Charlie) ğŸ¦Š Made in Taiwan
</footer>  </section>  </body></html> 