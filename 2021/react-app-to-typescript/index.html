<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.BScVxmeO.js"></script><!-- Google Tag Manager --><script>(function(){const ga4Id = "G-6QC9CKHCTY";

      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', ga4Id);
    })();</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=GTM-KM9SGJLK">(function(){const gTagId = "GTM-KM9SGJLK";
})();</script><script>(function(){const ga4Id = "G-6QC9CKHCTY";

      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', ga4Id);
    })();</script><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¦Š</text></svg>"><link rel="sitemap" href="/sitemap-index.xml"><meta name="generator" content="Astro v5.1.2"><!-- Primary Meta Tags --><title>ã€Œç”¨TSæ”¹å¯«å¹¼å…’é›£åº¦çš„React Appã€ç›¸é—œç­†è¨˜</title><meta name="title" content="ã€Œç”¨TSæ”¹å¯«å¹¼å…’é›£åº¦çš„React Appã€ç›¸é—œç­†è¨˜"><meta name="description" content="é€™æ˜¯ä¸€å€‹æ–‡çµ„è½‰è·å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€è¡“éƒ¨è½æ ¼"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://tzynwang.github.io/2021/react-app-to-typescript"><meta property="og:title" content="ã€Œç”¨TSæ”¹å¯«å¹¼å…’é›£åº¦çš„React Appã€ç›¸é—œç­†è¨˜"><meta property="og:description" content="é€™æ˜¯ä¸€å€‹æ–‡çµ„è½‰è·å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€è¡“éƒ¨è½æ ¼"><meta property="og:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://tzynwang.github.io/2021/react-app-to-typescript"><meta property="twitter:title" content="ã€Œç”¨TSæ”¹å¯«å¹¼å…’é›£åº¦çš„React Appã€ç›¸é—œç­†è¨˜"><meta property="twitter:description" content="é€™æ˜¯ä¸€å€‹æ–‡çµ„è½‰è·å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€è¡“éƒ¨è½æ ¼"><meta property="twitter:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg"><!-- Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet"><style>.tag[data-astro-cid-2iymvi75]{position:relative;display:inline-flex;align-items:center;padding:2px 8px;font-size:14px;font-weight:400;text-decoration:none;background-color:#8aa6a3;color:#fff;transition:background-color .2s ease-in-out}.tag[data-astro-cid-2iymvi75]:not(:last-of-type){margin-right:8px}.tag[data-astro-cid-2iymvi75]:hover{background-color:#127369}
.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}.footer[data-astro-cid-qlgq3onj]{padding:36px;text-align:center}.bottom[data-astro-cid-qlgq3onj]{position:absolute;bottom:0;left:50%;transform:translate(-50%)}.side-content[data-astro-cid-75hifxor],.main-content[data-astro-cid-75hifxor]{margin:24px}nav[data-astro-cid-75hifxor]{display:flex;gap:16px}@media screen and (min-width: 800px){body{height:100vh;display:flex;flex-direction:row;overflow-y:hidden}nav[data-astro-cid-75hifxor]{flex-direction:column}.side-content[data-astro-cid-75hifxor]{flex:0 0 240px}.main-content[data-astro-cid-75hifxor]{margin:0;padding:40px 24px 0;flex:1 1 auto;overflow-y:auto;position:relative}}*{margin:0;padding:0;box-sizing:content-box;font-family:sans-serif;text-wrap:pretty;color:#000000e6}html{background-color:#bfbfbf66}a{color:#127369;font-weight:700;text-decoration:underline;text-decoration-color:transparent;transition:text-decoration-color .2s ease-in-out}a:hover{text-decoration-color:#127369}a.link-out{position:absolute;inset:0}ul,li{list-style-position:inside}ul:not(:has(li)){margin-top:16px;margin-bottom:16px}li{margin-top:4px;margin-bottom:4px;line-height:24px}li li{padding-left:16px}img{display:block;max-width:100%}h1,h2{font-size:28px;line-height:42px;margin:16px 0;color:#4c5958}h3,h4{font-size:22px;line-height:34px;margin:16px 0;color:#4c5958}h5{font-size:18px;line-height:28px;margin:4px 0;color:#4c5958}p{font-size:16px;line-height:24px;margin:16px 0}p code{font-size:14px}blockquote{padding-left:16px;border-left:4px solid #4c5958}blockquote *{font-family:Noto Sans,sans-serif}pre{padding:8px 16px}code,code span{font-family:monospace}hr{width:100%;height:1px;margin:16px 0;background-color:#4c5958}del{color:#4c5958e6}ol>li:has(p)>p{display:inline;margin:0}
.post-container[data-astro-cid-qtokga5y] h1[data-astro-cid-qtokga5y]{margin:0 0 16px}.info[data-astro-cid-qtokga5y]{display:flex;flex-direction:column;gap:8px}.toc-container[data-astro-cid-qtokga5y]{margin-bottom:0}.toc-container[data-astro-cid-qtokga5y]>li[data-astro-cid-qtokga5y]:not(:last-of-type){margin-bottom:4px}.toc-2[data-astro-cid-qtokga5y]{margin-left:1rem}.toc-3[data-astro-cid-qtokga5y]{margin-left:2rem}.toc-4[data-astro-cid-qtokga5y]{margin-left:3rem}.toc-5[data-astro-cid-qtokga5y]{margin-left:4rem}@media screen and (min-width: 800px){.post-container[data-astro-cid-qtokga5y]{max-width:600px}}@media screen and (min-width: 1200px){.post-container[data-astro-cid-qtokga5y]{max-width:720px}}
[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style></head> <body> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KM9SGJLK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!-- End Google Tag Manager (noscript) --> <section class="side-content" data-astro-cid-75hifxor> <h1 data-astro-cid-75hifxor>æ™®é€šæ–‡çµ„ 2.0</h1> <nav data-astro-cid-75hifxor> <a href="/" data-astro-cid-75hifxor>é¦–é </a> <a href="/archive" data-astro-cid-75hifxor>å…¨æ–‡ç« æ­¸æª”</a> <a href="/tag" data-astro-cid-75hifxor>ä»¥æ¨™ç±¤æª¢è¦–</a> <a href="/rss.xml" data-astro-cid-75hifxor>RSS</a> </nav> </section> <section class="main-content" data-astro-cid-75hifxor>   <div class="post-container" data-astro-cid-qtokga5y> <h1 data-astro-cid-qtokga5y>ã€Œç”¨TSæ”¹å¯«å¹¼å…’é›£åº¦çš„React Appã€ç›¸é—œç­†è¨˜</h1> <div class="info" data-astro-cid-qtokga5y> <span data-astro-cid-qtokga5y>2021-11-05 13:00</span> <span data-astro-cid-qtokga5y><a class="tag" href="/tag/React" data-astro-cid-2iymvi75> React </a> <a class="tag" href="/tag/TypeScript" data-astro-cid-2iymvi75> TypeScript </a> </span> <ul class="toc-container" data-astro-cid-qtokga5y> <li class="toc-2" data-astro-cid-qtokga5y> <a href="#ç¸½çµ" data-astro-cid-qtokga5y>ç¸½çµ</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#ç‰ˆæœ¬" data-astro-cid-qtokga5y>ç‰ˆæœ¬</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#react-éƒ¨åˆ†" data-astro-cid-qtokga5y>React éƒ¨åˆ†</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#jsx" data-astro-cid-qtokga5y>JSX</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#usestate" data-astro-cid-qtokga5y>useState()</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#æ”¹è£ç‚º-ts" data-astro-cid-qtokga5y>æ”¹è£ç‚º TS</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#å°‡-ts-åŠ å…¥å°ˆæ¡ˆä¸­" data-astro-cid-qtokga5y>å°‡ TS åŠ å…¥å°ˆæ¡ˆä¸­</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#å°‡åŸå§‹ç¢¼æ”¹ç‚º-ts" data-astro-cid-qtokga5y>å°‡åŸå§‹ç¢¼æ”¹ç‚º TS</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#é—œæ–¼-reactfc" data-astro-cid-qtokga5y>é—œæ–¼ React.FC</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#è£œå……" data-astro-cid-qtokga5y>è£œå……</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#named-export-default-export" data-astro-cid-qtokga5y>named export, default export</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#åƒè€ƒæ–‡ä»¶" data-astro-cid-qtokga5y>åƒè€ƒæ–‡ä»¶</a> </li> </ul> </div> <h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>å¿«é€Ÿå…¥é–€ React å¾Œï¼Œå°‡å…¶ JS éƒ¨åˆ†æ”¹ç‚º TypeScriptï¼Œè¨˜éŒ„ä¸‹ç›¸é—œç­†è¨˜ä»¥åŠè½‰æ›é€”ä¸­é‡åˆ°çš„å‘
å¦å¤–å› ç‚ºå·²ç¶“å­¸é Vueï¼Œæ•…ä»¥ä¸‹ç­†è¨˜æœƒåŒ…å«ä¸€äº›èˆ‡ Vue é¡ä¼¼æˆ–ç›¸ç•°çš„æ¯”è¼ƒ</p>
<p>JS ç‰ˆåŸå§‹ç¢¼ï¼š<a href="https://github.com/tzynwang/react-practice/tree/speed-converter">https://github.com/tzynwang/react-practice/tree/speed-converter</a>
TS ç‰ˆåŸå§‹ç¢¼ï¼š<a href="https://github.com/tzynwang/react-practice/tree/speed-converter-ts">https://github.com/tzynwang/react-practice/tree/speed-converter-ts</a></p>
<p>æ•™æå…§å®¹å–è‡ªï¼š<a href="https://ithelp.ithome.com.tw/users/20103315/ironman/2668">å¾ Hooks é–‹å§‹ï¼Œè®“ä½ çš„ç¶²é  React èµ·ä¾†</a></p>
<h2 id="ç‰ˆæœ¬">ç‰ˆæœ¬</h2>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>react: 17.0.2</span></span>
<span class="line"><span>typescript: 4.4.4</span></span></code></pre>
<h2 id="react-éƒ¨åˆ†">React éƒ¨åˆ†</h2>
<ul>
<li>React components are regular JavaScript functions, but their <strong>names must start with a capital letter</strong> or they wonâ€™t work! ä½œç‚º<strong>å…ƒä»¶</strong>çš„ function å…¶åç¨±ä¸€å®šè¦<strong>å¤§å¯«é–‹é ­</strong></li>
</ul>
<h3 id="jsx">JSX</h3>
<ul>
<li>
<p>åŸºæœ¬ä¸Šæ¥æ”¶ä»»ä½•è³‡æ–™ï¼ˆstrings, numbers, and other <strong>JavaScript expressions</strong>ï¼‰ï¼Œéœ€æ³¨æ„åœ¨é€²è¡Œæ¢ä»¶åˆ¤æ–·çš„æ™‚å€™åªèƒ½ä½¿ç”¨ expressions</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#B392F0">App</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#E1E4E8"> [</span><span style="color:#79B8FF">userInput</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">setUserInput</span><span style="color:#E1E4E8">] </span><span style="color:#F97583">=</span><span style="color:#B392F0"> useState</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#B392F0"> handleUserInput</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">    setUserInput</span><span style="color:#E1E4E8">(e.target.value);</span></span>
<span class="line"><span style="color:#E1E4E8">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"container"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"card-header"</span><span style="color:#E1E4E8">>Network Speed Converter&#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">div</span><span style="color:#B392F0"> className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"card-body"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#79B8FF">UnitControl</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#79B8FF">UnitConverter</span></span>
<span class="line"><span style="color:#B392F0">          userInput</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{userInput}</span></span>
<span class="line"><span style="color:#B392F0">          handleUserInput</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{handleUserInput}</span></span>
<span class="line"><span style="color:#E1E4E8">        /></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#79B8FF">CardFooter</span><span style="color:#B392F0"> userInput</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{userInput} /></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">div</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> UnitConverter</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> ({ </span><span style="color:#FFAB70">userInput</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">handleUserInput</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span><span style="color:#6A737D">/* ç•¥ */</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">input</span></span>
<span class="line"><span style="color:#B392F0">      type</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"number"</span></span>
<span class="line"><span style="color:#B392F0">      className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"input-number"</span></span>
<span class="line"><span style="color:#B392F0">      min</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"0"</span></span>
<span class="line"><span style="color:#B392F0">      value</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{userInput}</span></span>
<span class="line"><span style="color:#B392F0">      autoFocus</span></span>
<span class="line"><span style="color:#B392F0">      onChange</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{handleUserInput}</span></span>
<span class="line"><span style="color:#E1E4E8">    /></span></span>
<span class="line"><span style="color:#E1E4E8">    {</span><span style="color:#6A737D">/* ç•¥ */</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">  )</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p><code>handleUserInput</code>é€é props å‚³çµ¦<code>UnitConverter</code>å…ƒä»¶ï¼Œ<code>UnitConverter</code>åœ¨ onChange äº‹ä»¶ç™¼ç”Ÿæ™‚ï¼Œå³å¯é€é<code>handleUserInput</code>ä¿®æ”¹<code>userInput</code>çš„å€¼</p>
</li>
<li>
<p>æ”¾ CSS Object çš„è©±å°±å¤šåŒ…ä¸€å±¤<code>{}</code></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> TodoList</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">ul</span></span>
<span class="line"><span style="color:#B392F0">      style</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{{</span></span>
<span class="line"><span style="color:#E1E4E8">        backgroundColor: </span><span style="color:#9ECBFF">'black'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">        color: </span><span style="color:#9ECBFF">'pink'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      }}</span></span>
<span class="line"><span style="color:#E1E4E8">    ></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">>Improve the videophone&#x3C;/</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">>Prepare aeronautics lectures&#x3C;/</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">      &#x3C;</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">>Work on the alcohol-fuelled engine&#x3C;/</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;/</span><span style="color:#85E89D">ul</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  );</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre>
</li>
<li>
<p>JSX looks like HTML, but under the hood it is transformed into <strong>plain JavaScript objects</strong>. You canâ€™t return two objects from a function without wrapping them into an array. This explains why you also canâ€™t return two JSX tags without wrapping them into another tag or a fragment. æ¯å€‹ react å…ƒä»¶åªèƒ½å›å‚³å–®ä¸€å…§å®¹ï¼Œè¶…éä¸€å€‹å…ƒç´ è«‹ç”¨<code>&#x3C;>&#x3C;/></code>åŒ…èµ·ä¾†ï¼›ä¸èƒ½å›å‚³è¶…éä¸€å€‹å…ƒç´ æ˜¯å› ç‚ºé€™äº›å…ƒä»¶æœ€å¾Œæœƒè¢«è½‰ç‚º JS Objectï¼Œè¤‡æ•¸å€‹å…ƒç´ åœ¨ return æ™‚ä¸€å®šè¦æ‰“åŒ…æˆå–®ä¸€å…ƒç´ </p>
</li>
<li>
<p>JSX requires tags to be explicitly closed: self-closing tags like <code>&#x3C;img></code> must become <code>&#x3C;img /></code>, and wrapping tags like <code>&#x3C;li>oranges</code> must be written as <code>&#x3C;li>oranges&#x3C;/li></code>. æ‰€æœ‰çš„<strong>HTML å…ƒç´ ä¸€å®šè¦ closed</strong>ï¼ˆèˆ‰ä¾‹ï¼š<code>&#x3C;br></code>è¦æ”¹å¯«ç‚º<code>&#x3C;br /></code>ï¼‰</p>
</li>
<li>
<p>JSX turns into JavaScript and <strong>attributes written in JSX become keys</strong> of JavaScript objects.</p>
</li>
</ul>
<h3 id="usestate">useState()</h3>
<ul>
<li>Returns a stateful value, and <strong>a function to update it</strong>.</li>
<li>æ”¾åˆ°<code>useState(...)</code>è£¡çš„è®Šæ•¸æ‰æœƒè¢« React è¿½è¹¤ï¼Œæ¦‚å¿µé¡ä¼¼è³‡æ–™è¦æ”¾åœ¨<code>data()</code>ä¸­æ‰æœƒè¢« Vue è¿½è¹¤ã€ä¿®æ”¹å¾Œæ‰æœƒè·Ÿè‘—é©…å‹•ç•«é¢æ›´æ–°</li>
</ul>
<h2 id="æ”¹è£ç‚º-ts">æ”¹è£ç‚º TS</h2>
<h3 id="å°‡-ts-åŠ å…¥å°ˆæ¡ˆä¸­">å°‡ TS åŠ å…¥å°ˆæ¡ˆä¸­</h3>
<p>é€éä»¥ä¸‹æ‰‹çºŒå°‡åŸæœ¬æ˜¯ JS çš„ React å°ˆæ¡ˆæ”¹ç‚º TS ç‰ˆæœ¬ï¼š</p>
<ol>
<li><code>npm install --save typescript @types/node @types/react @types/react-dom @types/jest</code></li>
<li>package.json ä¸­çš„<code>scripts/build</code>å…§å®¹æ”¹ç‚º<code>tsc</code></li>
<li><code>npx tsc --init</code></li>
<li>æ ¹æ“šå¯¦éš›æƒ…æ³èª¿æ•´ tsconfig.json ä¸­<code>rootDir</code>èˆ‡<code>rootDir</code>çš„è¨­å®šï¼ˆå®˜æ–¹æ–‡ä»¶é è¨­ç‚º<code>src</code>èˆ‡<code>build</code>ï¼‰</li>
<li>è¨­å®š<code>jsx</code>ç‚º<code>preserve</code>ï¼ˆåƒè€ƒè¨è«–ä¸²ï¼š<a href="https://github.com/Microsoft/vscode/issues/15814">Error when opening TSX file: Cannot use JSX unless â€˜â€”jsxâ€™ flag is provided</a>ï¼‰</li>
<li><code>.js</code>å‰¯æª”åæ”¹ç‚º<code>.ts</code>æˆ–<code>.tsx</code>ï¼ˆenable JSX with TypeScriptï¼Œåƒè€ƒ<a href="https://www.typescriptlang.org/docs/handbook/jsx.html">TS å®˜æ–¹æ–‡ä»¶</a>ï¼‰</li>
</ol>
<p>å®Œæ•´èªªæ˜åƒè€ƒ React å®˜æ–¹æ–‡ä»¶ï¼š<a href="https://reactjs.org/docs/static-type-checking.html#adding-typescript-to-a-project">Adding TypeScript to a Project</a>
å‚™è¨»ï¼šå¦‚æœæ˜¯è¦å¾é›¶é–‹å§‹ä¸€å€‹ React+TS å°ˆæ¡ˆçš„è©±ï¼Œç›´æ¥<code>npx create-react-app &#x3C;app-name> --template typescript</code>å³å¯</p>
<h3 id="å°‡åŸå§‹ç¢¼æ”¹ç‚º-ts">å°‡åŸå§‹ç¢¼æ”¹ç‚º TS</h3>
<ul>
<li>
<p>å·åƒæ­¥ï¼šåœ¨ vs code ä¸­å¦‚æœä¸çŸ¥é“è©² event çš„é¡å‹ï¼Œå¯ä»¥åœ¨<code>{}</code>ä¸­å¯«å‡º e ç„¶å¾Œé€éæ»‘é¼  hover ä¾†æŸ¥çœ‹ event é¡å‹
<img src="/2021/react-app-to-typescript/peek-event-type.png" alt="peek event type"></p>
</li>
<li>
<p>éœ€æ³¨æ„ï¼šåœ¨é€é<code>e.target.value</code>å–ä½¿ç”¨è€…è¼¸å…¥çš„å€¼ï¼ˆ<code>value</code>ï¼‰çš„æ™‚å€™ï¼Œå–åˆ°çš„<code>value</code>æœƒæ˜¯<code>string</code>å‹æ…‹è³‡æ–™</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-value">MDN <code>&#x3C;input></code> element value</a>: It can be altered or retrieved at any time using JavaScript to <strong>access the respective <code>HTMLInputElement</code> objectâ€™s value property</strong>.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement">MDN <code>HTMLInputElement</code> value property</a>: It is <strong>string</strong>, returns / sets the current value of the control.</li>
<li>æ‰€ä»¥<code>handleUserInput</code>åœ¨æ”¹å¯«æˆ TS ç‰ˆåŠ ä¸Šçš„ type å¿…é ˆç‚º<code>string</code>ï¼š</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> handleUserInput</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">e</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ChangeEvent</span><span style="color:#E1E4E8">&#x3C;{ </span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }>) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  const</span><span style="color:#79B8FF"> rawInput</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> Number</span><span style="color:#E1E4E8">(e.target.value);</span></span>
<span class="line"><span style="color:#F97583">  if</span><span style="color:#E1E4E8"> (</span><span style="color:#B392F0">isNaN</span><span style="color:#E1E4E8">(rawInput)) </span><span style="color:#F97583">return</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#B392F0">  setUserInput</span><span style="color:#E1E4E8">(rawInput);</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre>
</li>
<li>
<p>åœ¨å°‡ function <code>handleUserInput</code>é€é props å‚³çµ¦å…ƒä»¶<code>UnitConverter</code>çš„æ™‚å€™æƒ³ä¸é€šã€Œfunction çš„é¡å‹ç©¶ç«Ÿæ˜¯ä»€éº¼ã€ï¼Œé€éé—œéµå­—æœå°‹å¾Œç™¼ç¾èˆ‡å…¶èªªæ˜¯ function çš„ã€Œtypeã€æ˜¯ä»€éº¼ï¼Œä¸å¦‚èªªæ˜¯å‘Šè¨´ TSã€Œé€™å€‹ function çš„ shape æ˜¯ä»€éº¼å½¢ç‹€ã€</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#6A737D">// in UnitConverter.tsx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> propsType</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  userInput</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span></span>
<span class="line"><span style="color:#6A737D">  // handleUserInputçš„å½¢ç‹€æ˜¯ï¼šæ¥å—eåšç‚ºåƒæ•¸å‚³å…¥ï¼Œä¸¦ã€Œä¸å›å‚³ã€ä»»ä½•å€¼ï¼Œæ‰€ä»¥ => void</span></span>
<span class="line"><span style="color:#B392F0">  handleUserInput</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">e</span><span style="color:#F97583">:</span><span style="color:#B392F0"> ChangeEvent</span><span style="color:#E1E4E8">&#x3C;{ </span><span style="color:#FFAB70">value</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8"> }>) </span><span style="color:#F97583">=></span><span style="color:#79B8FF"> void</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> UnitConverter</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> ({ </span><span style="color:#FFAB70">userInput</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">handleUserInput</span><span style="color:#E1E4E8"> }</span><span style="color:#F97583">:</span><span style="color:#B392F0"> propsType</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  return</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#E1E4E8">    {</span><span style="color:#6A737D">/* ç•¥ */</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">input</span></span>
<span class="line"><span style="color:#B392F0">      type</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"number"</span></span>
<span class="line"><span style="color:#B392F0">      className</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"input-number"</span></span>
<span class="line"><span style="color:#B392F0">      min</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">"0"</span></span>
<span class="line"><span style="color:#B392F0">      value</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{userInput}</span></span>
<span class="line"><span style="color:#B392F0">      autoFocus</span></span>
<span class="line"><span style="color:#B392F0">      onChange</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">{handleUserInput}</span></span>
<span class="line"><span style="color:#E1E4E8">    /></span></span>
<span class="line"><span style="color:#E1E4E8">    {</span><span style="color:#6A737D">/* ç•¥ */</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#E1E4E8">  )</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>åƒè€ƒè¨è«–ä¸²ï¼šã€Œ<a href="https://stackoverflow.com/questions/29689966/how-to-define-type-for-a-function-callback-as-any-function-type-not-universal">How to define type for a function callback (as any function type, not universal any) used in a method parameter</a>ã€</p>
</li>
<li>
<p>ä½¿ç”¨ deconstruct æŠ€å·§è™•ç† props åˆå¿…é ˆçµ¦äºˆ type æ™‚ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å¯«æ³•ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> CardFooter</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">props</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">userInput</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  /* ç•¥ */</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre>
<p>æˆ–æ˜¯é€™æ¨£ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> CardFooter</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> ({ </span><span style="color:#FFAB70">userInput</span><span style="color:#E1E4E8"> }</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> { </span><span style="color:#FFAB70">userInput</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8"> }) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  /* ç•¥ */</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre>
<p>æˆ–æ˜¯é€™æ¨£ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="jsx"><code><span class="line"><span style="color:#F97583">interface</span><span style="color:#B392F0"> userInputType</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  userInput</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#B392F0"> CardFooter</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> ({ </span><span style="color:#FFAB70">userInput</span><span style="color:#E1E4E8"> }</span><span style="color:#F97583">:</span><span style="color:#B392F0"> userInputType</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=></span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  /* ç•¥ */</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre>
<p>ä»¥ä¸Šåšçš„éƒ½æ˜¯ã€Œè¨­å®š props ä¸­ userInput çš„é¡å‹ç‚º<code>number</code>ã€åŒä¸€ä»¶äº‹æƒ…</p>
</li>
</ul>
<h3 id="é—œæ–¼-reactfc">é—œæ–¼ React.FC</h3>
<p>åƒè€ƒ React+TypeScript Cheatsheetsï¼Œå°ç¸½çµï¼šä¸å»ºè­°ä½¿ç”¨<code>React.FC</code>ï¼Œå¯æ”¹ç”¨<code>React.VFC</code>ï¼›<code>React.FC</code>èˆ‡ä¸€èˆ¬ function ä¸åŒçš„éƒ¨åˆ†å¦‚ä¸‹åˆ—ï¼š</p>
<ul>
<li><code>React.FunctionComponent</code> is <strong>explicit about the return type</strong>, while the normal function version is implicit (or else needs additional annotation).</li>
<li>å¼•ç”¨è‡ª PJï¼š<code>React.FC</code>æœƒæ˜ç¢ºå®šç¾© Function Component å›å‚³çš„å‹åˆ¥ä¸€å®šè¦æ˜¯<code>JSX.Element</code>æˆ–<code>null</code>è€Œä¸èƒ½æ˜¯<code>undefined</code>ã€‚</li>
<li>It <strong>provides typechecking and autocomplete</strong> for static properties like <code>displayName</code>, <code>propTypes</code>, and <code>defaultProps</code>. Note that there are some known issues using <code>defaultProps</code> with <code>React.FunctionComponent</code>.</li>
<li>It provides an implicit definition of children - however there are some issues with the implicit children type (e.g. DefinitelyTyped#33006), and it might be better to be explicit about components that consume children, anyway.</li>
<li>å¼•ç”¨è‡ª PJï¼š<code>React.FC</code>æœƒè‡ªå‹•æ¥å—<code>children</code>ä½œç‚ºå¯ä»¥å‚³å…¥çš„ propsï¼Œå³ä½¿åœ¨é€™å€‹ React å…ƒä»¶ä¸­ä¸¦ä¸æœƒä½¿ç”¨åˆ°<code>children</code>ã€‚</li>
</ul>
<h2 id="è£œå……">è£œå……</h2>
<h3 id="named-export-default-export">named export, default export</h3>
<ul>
<li>If a module defines a <strong>default export</strong>, then you can import that default export by <strong>omitting the curly braces</strong>.
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#6A737D">// foo.js</span></span>
<span class="line"><span style="color:#F97583">export</span><span style="color:#F97583"> default</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> foo</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#E1E4E8">  console.</span><span style="color:#B392F0">log</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'hello!'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="javascript"><code><span class="line"><span style="color:#F97583">import</span><span style="color:#E1E4E8"> foo </span><span style="color:#F97583">from</span><span style="color:#9ECBFF"> 'foo'</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#B392F0">foo</span><span style="color:#E1E4E8">(); </span><span style="color:#6A737D">// hello!</span></span></code></pre>
</li>
<li>A file can have <strong>no more than one <em>default</em> export</strong>, but it can have <strong>as many <em>named</em> exports as you like</strong>. export default åªèƒ½æœ‰ä¸€å€‹ï¼Œä½† named exports å¯ä»¥æœ‰ç„¡æ•¸å€‹</li>
<li>When you write a <strong><em>default</em> import</strong>, you can put <strong>any name</strong> you want after <code>import</code>. For example, you could write <code>import Banana from './button.js'</code> instead and it would still provide you with the same default export.</li>
<li>In contrast, with <strong>named imports, the name has to match on both sides</strong>. Thatâ€™s why they are called <em>named</em> imports!</li>
</ul>
<p><img src="/2021/react-app-to-typescript/export.jpg" alt="export"></p>
<h2 id="åƒè€ƒæ–‡ä»¶">åƒè€ƒæ–‡ä»¶</h2>
<ul>
<li><a href="https://pjchender.blogspot.com/2020/07/typescript-react-using-typescript-in.html">[æ˜ç«…] äº†è§£é€™äº›ï¼Œæ›´å¿«æŒæ¡ TypeScript åœ¨ React ä¸­çš„ä½¿ç”¨ï¼ˆUsing TypeScript in Reactï¼‰</a></li>
<li><a href="https://github.com/typescript-cheatsheets/react#readme">React+TypeScript Cheatsheets</a></li>
<li><a href="https://transform.tools/html-to-jsx">transform HTML to JSX</a></li>
</ul> </div>   <footer class="footer" data-astro-cid-qlgq3onj>
Tzu Yin (Charlie) ğŸ¦Š Made in Taiwan
</footer>  </section>  </body></html> 