<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.BScVxmeO.js"></script><!-- Google Tag Manager --><script>(function(){const ga4Id = "G-6QC9CKHCTY";

      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', ga4Id);
    })();</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=GTM-KM9SGJLK">(function(){const gTagId = "GTM-KM9SGJLK";
})();</script><script>(function(){const ga4Id = "G-6QC9CKHCTY";

      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', ga4Id);
    })();</script><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¦Š</text></svg>"><link rel="sitemap" href="/sitemap-index.xml"><meta name="generator" content="Astro v5.1.2"><!-- Primary Meta Tags --><title>é–±è®€ç­†è¨˜ï¼šGood Code, Bad Code Chapter 6 Avoid surprises</title><meta name="title" content="é–±è®€ç­†è¨˜ï¼šGood Code, Bad Code Chapter 6 Avoid surprises"><meta name="description" content="é€™æ˜¯ä¸€å€‹æ–‡çµ„è½‰è·å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€è¡“éƒ¨è½æ ¼"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://tzynwang.github.io/2023/good-code-bad-code-ch6-avoid-surprises"><meta property="og:title" content="é–±è®€ç­†è¨˜ï¼šGood Code, Bad Code Chapter 6 Avoid surprises"><meta property="og:description" content="é€™æ˜¯ä¸€å€‹æ–‡çµ„è½‰è·å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€è¡“éƒ¨è½æ ¼"><meta property="og:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://tzynwang.github.io/2023/good-code-bad-code-ch6-avoid-surprises"><meta property="twitter:title" content="é–±è®€ç­†è¨˜ï¼šGood Code, Bad Code Chapter 6 Avoid surprises"><meta property="twitter:description" content="é€™æ˜¯ä¸€å€‹æ–‡çµ„è½‰è·å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€è¡“éƒ¨è½æ ¼"><meta property="twitter:image" content="https://tzynwang.github.io/alexander-andrews-mEdKuPYJe1I.jpg"><!-- Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet"><style>.tag[data-astro-cid-2iymvi75]{position:relative;display:inline-flex;align-items:center;padding:2px 8px;font-size:14px;font-weight:400;text-decoration:none;background-color:#8aa6a3;color:#fff;transition:background-color .2s ease-in-out}.tag[data-astro-cid-2iymvi75]:not(:last-of-type){margin-right:8px}.tag[data-astro-cid-2iymvi75]:hover{background-color:#127369}
.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}.footer[data-astro-cid-qlgq3onj]{padding:36px;text-align:center}.bottom[data-astro-cid-qlgq3onj]{position:absolute;bottom:0;left:50%;transform:translate(-50%)}.side-content[data-astro-cid-75hifxor],.main-content[data-astro-cid-75hifxor]{margin:24px}nav[data-astro-cid-75hifxor]{display:flex;gap:16px}@media screen and (min-width: 800px){body{height:100vh;display:flex;flex-direction:row;overflow-y:hidden}nav[data-astro-cid-75hifxor]{flex-direction:column}.side-content[data-astro-cid-75hifxor]{flex:0 0 240px}.main-content[data-astro-cid-75hifxor]{margin:0;padding:40px 24px 0;flex:1 1 auto;overflow-y:auto;position:relative}}*{margin:0;padding:0;box-sizing:content-box;font-family:sans-serif;text-wrap:pretty;color:#000000e6}html{background-color:#bfbfbf66}a{color:#127369;font-weight:700;text-decoration:underline;text-decoration-color:transparent;transition:text-decoration-color .2s ease-in-out}a:hover{text-decoration-color:#127369}a.link-out{position:absolute;inset:0}ul,li{list-style-position:inside}ul:not(:has(li)){margin-top:16px;margin-bottom:16px}li{margin-top:4px;margin-bottom:4px;line-height:24px}li li{padding-left:16px}img{display:block;max-width:100%}h1,h2{font-size:28px;line-height:42px;margin:16px 0;color:#4c5958}h3,h4{font-size:22px;line-height:34px;margin:16px 0;color:#4c5958}h5{font-size:18px;line-height:28px;margin:4px 0;color:#4c5958}p{font-size:16px;line-height:24px;margin:16px 0}p code{font-size:14px}blockquote{padding-left:16px;border-left:4px solid #4c5958}blockquote *{font-family:Noto Sans,sans-serif}pre{padding:8px 16px}code,code span{font-family:monospace}hr{width:100%;height:1px;margin:16px 0;background-color:#4c5958}del{color:#4c5958e6}ol>li:has(p)>p{display:inline;margin:0}
.post-container[data-astro-cid-qtokga5y] h1[data-astro-cid-qtokga5y]{margin:0 0 16px}.info[data-astro-cid-qtokga5y]{display:flex;flex-direction:column;gap:8px}.toc-container[data-astro-cid-qtokga5y]{margin-bottom:0}.toc-container[data-astro-cid-qtokga5y]>li[data-astro-cid-qtokga5y]:not(:last-of-type){margin-bottom:4px}.toc-2[data-astro-cid-qtokga5y]{margin-left:1rem}.toc-3[data-astro-cid-qtokga5y]{margin-left:2rem}.toc-4[data-astro-cid-qtokga5y]{margin-left:3rem}.toc-5[data-astro-cid-qtokga5y]{margin-left:4rem}@media screen and (min-width: 800px){.post-container[data-astro-cid-qtokga5y]{max-width:600px}}@media screen and (min-width: 1200px){.post-container[data-astro-cid-qtokga5y]{max-width:720px}}
[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style></head> <body> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KM9SGJLK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!-- End Google Tag Manager (noscript) --> <section class="side-content" data-astro-cid-75hifxor> <h1 data-astro-cid-75hifxor>æ™®é€šæ–‡çµ„ 2.0</h1> <nav data-astro-cid-75hifxor> <a href="/" data-astro-cid-75hifxor>é¦–é </a> <a href="/archive" data-astro-cid-75hifxor>å…¨æ–‡ç« æ­¸æª”</a> <a href="/tag" data-astro-cid-75hifxor>ä»¥æ¨™ç±¤æª¢è¦–</a> <a href="/rss.xml" data-astro-cid-75hifxor>RSS</a> </nav> </section> <section class="main-content" data-astro-cid-75hifxor>   <div class="post-container" data-astro-cid-qtokga5y> <h1 data-astro-cid-qtokga5y>é–±è®€ç­†è¨˜ï¼šGood Code, Bad Code Chapter 6 Avoid surprises</h1> <div class="info" data-astro-cid-qtokga5y> <span data-astro-cid-qtokga5y>2023-03-29 19:15</span> <span data-astro-cid-qtokga5y><a class="tag" href="/tag/Software Architecture" data-astro-cid-2iymvi75> Software Architecture </a> </span> <ul class="toc-container" data-astro-cid-qtokga5y> <li class="toc-2" data-astro-cid-qtokga5y> <a href="#ç¸½çµ" data-astro-cid-qtokga5y>ç¸½çµ</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#ç­†è¨˜" data-astro-cid-qtokga5y>ç­†è¨˜</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#å¦‚ä½•é¿å…é©šå–œé©šåš‡" data-astro-cid-qtokga5y>å¦‚ä½•é¿å…é©šå–œï¼ˆé©šåš‡ï¼‰</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#å¯¦ä½œæ–¹å¼" data-astro-cid-qtokga5y>å¯¦ä½œæ–¹å¼</a> </li><li class="toc-4" data-astro-cid-qtokga5y> <a href="#é¿å…ä½¿ç”¨-magic-value" data-astro-cid-qtokga5y>é¿å…ä½¿ç”¨ magic value</a> </li><li class="toc-4" data-astro-cid-qtokga5y> <a href="#è¬¹æ…ä½¿ç”¨-null-object" data-astro-cid-qtokga5y>è¬¹æ…ä½¿ç”¨ null object</a> </li><li class="toc-4" data-astro-cid-qtokga5y> <a href="#é¿å…ç„¡é æœŸçš„-side-effects" data-astro-cid-qtokga5y>é¿å…ç„¡é æœŸçš„ side effects</a> </li><li class="toc-4" data-astro-cid-qtokga5y> <a href="#é¿å…ä¿®æ”¹åƒæ•¸" data-astro-cid-qtokga5y>é¿å…ä¿®æ”¹åƒæ•¸</a> </li><li class="toc-4" data-astro-cid-qtokga5y> <a href="#è¬¹æ…å°æ‡‰-enum" data-astro-cid-qtokga5y>è¬¹æ…å°æ‡‰ enum</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#åƒè€ƒæ–‡ä»¶" data-astro-cid-qtokga5y>åƒè€ƒæ–‡ä»¶</a> </li> </ul> </div> <h2 id="ç¸½çµ">ç¸½çµ</h2>
<p>æ­¤ç¯‡æ–‡ç« æ˜¯ Good Code, Bad Code: Think like a software engineer ç¬¬å…­ç« ï¼ˆAvoid surprisesï¼‰çš„é–±è®€ç­†è¨˜ï¼Œä¸¦æ‘˜éŒ„äº†æ›¸ä¸­ä¸€äº›é—œæ–¼ã€Œæ¸›å°‘ç¨‹å¼ç¢¼å°ä½¿ç”¨è€…é€ æˆé©šå–œï¼ˆé©šåš‡ï¼‰ã€çš„å¯¦ä½œæŠ€å·§ã€‚</p>
<h2 id="ç­†è¨˜">ç­†è¨˜</h2>
<h3 id="å¦‚ä½•é¿å…é©šå–œé©šåš‡">å¦‚ä½•é¿å…é©šå–œï¼ˆé©šåš‡ï¼‰</h3>
<p>æœ¬ç« ç¸½çµï¼šé¿å…é©šåš‡ï¼ˆé©šå–œï¼‰æœ€å¥½çš„è¾¦æ³•ï¼Œå°±æ˜¯è®“ç¨‹å¼ç¢¼çš„ä½¿ç”¨è€…æ˜ç¢ºæ„è­˜åˆ°ã€Œé€™æ®µç¨‹å¼ç¢¼é‹ä½œä¹‹å¾Œï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…ã€ã€‚</p>
<blockquote>
<p>Avoiding surprises is often about <strong>being explicit</strong>. If a function sometimes returns nothing or there is a special scenario that needs handling then we should <strong>make sure other engineers are aware of this</strong>.</p>
</blockquote>
<h3 id="å¯¦ä½œæ–¹å¼">å¯¦ä½œæ–¹å¼</h3>
<h4 id="é¿å…ä½¿ç”¨-magic-value">é¿å…ä½¿ç”¨ magic value</h4>
<p><code>Array.prototype.findIndex()</code> å°±æ˜¯ä¸€å€‹ä½¿ç”¨ magic value çš„ä¾‹å­ã€‚ç•¶ <code>findIndex()</code> ç„¡æ³•åœ¨è©²é™£åˆ—ä¸­æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„é …ç›®æ™‚ï¼Œæ­¤åŠŸèƒ½ä¸æ˜¯å›å‚³ <code>null</code> æˆ– <code>undefined</code>ï¼Œè€Œæ˜¯å›å‚³ <code>-1</code>ã€‚</p>
<p>é€™éº¼åšçš„ç¼ºé»æ˜¯ï¼š</p>
<ol>
<li>TypeScript å°å›å‚³å€¼çš„å‹åˆ¥æª¢æŸ¥å¤±æ•ˆï¼Œä½¿ç”¨è€…ä¸€å®šè¦æ‰‹å‹•æª¢æŸ¥å›å‚³çš„å€¼æ˜¯å¦å¤§æ–¼ <code>-1</code> æ‰èƒ½çŸ¥é“ã€Œåˆ°åº•æœ‰æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„é …ç›®ã€</li>
<li>å¦‚æœä½¿ç”¨è€…æ²’æœ‰æŸ¥é–± <code>Array.prototype.findIndex()</code> çš„æ–‡ä»¶ï¼Œä»–ä¸æœƒçŸ¥é“é€™å€‹åŠŸèƒ½æ˜¯é€éã€Œå›å‚³ <code>-1</code>ã€ä¾†ä»£è¡¨ã€Œæ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„é …ç›®ã€</li>
</ol>
<p>æœ‰é‘’æ–¼ä»¥ä¸Šçš„ä¸ä¾¿æ€§ï¼Œå·¥ç¨‹å¸«åœ¨é–‹ç™¼ä¸€å€‹ function æ™‚æ‡‰é¸æ“‡é¿å…ä½¿ç”¨ magic valueã€‚</p>
<p>ä»¥ TypeScript é–‹ç™¼ä¾†èªªï¼Œä¸Šè¿°åŠŸèƒ½å¦‚æœæ”¹ç‚ºã€Œæ‰¾ä¸åˆ°å°æ‡‰é …ç›®æ™‚ï¼Œå›å‚³ <code>null</code> æˆ– <code>undefined</code>ã€çš„è©±ï¼Œä½¿ç”¨æ­¤åŠŸèƒ½çš„å·¥ç¨‹å¸«å³å¯é€éã€Œæª¢æŸ¥å›å‚³å€¼çš„å‹åˆ¥ã€ä¾†çŸ¥é“è©²åŠŸèƒ½ç©¶ç«Ÿæœ‰æ²’æœ‰æ‰¾åˆ°å°æ‡‰é …ç›®ã€‚</p>
<h4 id="è¬¹æ…ä½¿ç”¨-null-object">è¬¹æ…ä½¿ç”¨ null object</h4>
<p>ä»¥ä¸‹åˆ—åŠŸèƒ½ç‚ºä¾‹ï¼Œå‘¼å« <code>getUserInfo</code> å¾Œå¿…å®šæœƒå–å¾—ä¸€å€‹ç¬¦åˆ <code>UserInfo</code> å‹æ…‹çš„è³‡æ–™ï¼Œä½†è®Šæ•¸ <code>userInfo</code> å»ä¸ä¿è­‰åŒ…å«æœ‰æ•ˆè³‡è¨Šï¼Œå¦‚æœåœ¨å‘¼å« API æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œé€™å€‹ <code>userInfo</code> å°±æœƒæ˜¯ä¸€å€‹ç©ºæ®¼ç‰©ä»¶ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">async</span><span style="color:#F97583"> function</span><span style="color:#B392F0"> getUserInfo</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">user_id</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">)</span><span style="color:#F97583">:</span><span style="color:#B392F0"> UserInfo</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  try</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> results</span><span style="color:#F97583"> =</span><span style="color:#F97583"> await</span><span style="color:#E1E4E8"> api.user.</span><span style="color:#B392F0">getInfo</span><span style="color:#E1E4E8">(user_id);</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> userInfo</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">      user_id,</span></span>
<span class="line"><span style="color:#E1E4E8">      display_name: results.data.payload.display_name,</span></span>
<span class="line"><span style="color:#E1E4E8">      email: results.data.payload.email,</span></span>
<span class="line"><span style="color:#E1E4E8">      is_validate: results.data.payload.is_validate,</span></span>
<span class="line"><span style="color:#E1E4E8">    };</span></span>
<span class="line"><span style="color:#E1E4E8">  } </span><span style="color:#F97583">catch</span><span style="color:#E1E4E8"> (error) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">      user_id: </span><span style="color:#9ECBFF">''</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      display_name: </span><span style="color:#9ECBFF">''</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      email: </span><span style="color:#9ECBFF">''</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">      is_validate: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    };</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> userInfo</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> getUserInfo</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'id_1'</span><span style="color:#E1E4E8">);</span></span></code></pre>
<p>è‹¥æœ‰ä¸€å€‹å·¥ç¨‹å¸«ä¸åšä»»ä½•æª¢æŸ¥ï¼Œç›´æ¥ä½¿ç”¨è®Šæ•¸ <code>userInfo</code> ä¾†æ¸²æŸ“ç•«é¢çš„è©±ï¼Œå°±æœƒé‡åˆ°ã€Œå‘¼å« API å¤±æ•—æ™‚ï¼Œç•«é¢ä¸Šæœƒç¼ºå°‘ä½¿ç”¨è€…çš„ç›¸é—œè³‡è¨Šã€çš„ç‹€æ³ã€‚</p>
<p>é™¤é <code>getUserInfo</code> çš„ä½¿ç”¨è€…çŸ¥é“é€™å€‹åŠŸèƒ½çš„å¯¦ä½œç´°ç¯€ï¼Œä¸ç„¶ä»¥ä¸Šçš„è¨­è¨ˆæ–¹å¼å¯èƒ½æœƒçµ¦ç¨‹å¼ç¢¼çš„ä½¿ç”¨è€…å¸¶ä¾†é©šå–œï¼ˆé©šåš‡ï¼‰ã€‚æ¯”è¼ƒå¥½çš„åšæ³•æ˜¯åœ¨å‘¼å« API å¤±æ•—æ™‚ç›´æ¥æ‹‹éŒ¯ã€æˆ–æ˜¯å›å‚³ <code>null</code> ç‰©ä»¶ã€‚</p>
<p>é›–ç„¶é€™æ¨£æœƒè®“ <code>getUserInfo</code> çš„ä½¿ç”¨è€…éœ€è¦é¡å¤–æ’°å¯«ä¸€æ®µ <code>if (userInfo !== null) { ... }</code> çš„æª¢æŸ¥é‚è¼¯ï¼Œä½†é€™å¯ä»¥ç¢ºä¿ <code>getUserInfo</code> çš„ä½¿ç”¨è€…æ„è­˜åˆ°ã€Œæ­¤åŠŸèƒ½å¯èƒ½ä¸æ˜¯æ¯æ¬¡éƒ½æœƒå›å‚³æœ‰æ•ˆå…§å®¹ã€ï¼Œé€²è€Œé¿å…éæ–¼å¤§æ„çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
<h4 id="é¿å…ç„¡é æœŸçš„-side-effects">é¿å…ç„¡é æœŸçš„ side effects</h4>
<p>ç”¢ç”Ÿ side effect æ˜¯æ’°å¯«ç¨‹å¼ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç’°ï¼Œä½†æœ¬æ›¸ä½œè€…æƒ³å¼·èª¿çš„äº‹æƒ…æ˜¯ï¼š</p>
<ul>
<li>å¦‚æœä¸€å€‹åŠŸèƒ½æœƒç”¢ç”Ÿ side effectï¼Œå‰‡å¿…é ˆè®“è©²åŠŸèƒ½çš„ä½¿ç”¨è€…æ„è­˜åˆ°ã€Œå‘¼å«æ­¤åŠŸèƒ½æœƒç”¢ç”Ÿ side effectã€
<ul>
<li>å»ºè­°ï¼šé€é function name æ˜ç¤ºä¸€å€‹åŠŸèƒ½æœƒç”¢ç”Ÿ side effect</li>
<li>é¿å…ï¼šä½¿ç”¨è€…éœ€è¦é€éè¨»è§£æˆ–æ–‡ä»¶æ‰æœƒçŸ¥é“ä¸€å€‹åŠŸèƒ½å¸¶æœ‰ side effectï¼ˆåƒè€ƒæœ¬æ›¸ç¬¬ä¸‰ç« ï¼‰</li>
</ul>
</li>
<li>å¦‚æœ side effect ä¸¦éå¿…è¦ï¼Œé‚£éº¼å°±æŠŠæœƒç”¢ç”Ÿ side effect çš„é‚è¼¯è‡ªè©²åŠŸèƒ½ä¸­ç§»é™¤æ‰</li>
</ul>
<blockquote>
<p>Not causing a side effect in the first place is the best way to avoid a surprise, but this is not always practical. When a side effect is unavoidable, <strong>naming things appropriately</strong> can be a very effective way to make it obvious.</p>
</blockquote>
<h4 id="é¿å…ä¿®æ”¹åƒæ•¸">é¿å…ä¿®æ”¹åƒæ•¸</h4>
<p>åœ¨ç„¡æ³•ä¿è­‰å‚³å…¥ä¸€å€‹åŠŸèƒ½çš„åƒæ•¸æ˜¯å¦æœ‰å¯èƒ½è¢«å…¶ä»–åŠŸèƒ½ä½¿ç”¨æ™‚ï¼Œæ¯”è¼ƒå¥½çš„åšæ³•æ˜¯è¤‡è£½ä¸€ä»½åƒæ•¸å¾Œï¼Œå†å°è©²å‰¯æœ¬é€²è¡Œä¿®æ”¹ã€‚å¦‚æœæ˜¯è¼ƒè¤‡é›œçš„å·¢ç‹€çµæ§‹ç‰©ä»¶ï¼Œå¯æ­é… <code>lodash/cloneDeep</code> ä¾†åŸ·è¡Œæ·±æ‹·è²ã€‚</p>
<h4 id="è¬¹æ…å°æ‡‰-enum">è¬¹æ…å°æ‡‰ enum</h4>
<p>é‡é»ï¼šå·¥ç¨‹å¸«éœ€æ„è­˜åˆ°ä¸€å€‹ <code>enum</code> æœ‰å¯èƒ½åœ¨æ—¥å¾Œç¹¼çºŒå¢åŠ é …ç›®</p>
<blockquote>
<p>When you do have to handle an enum, itâ€™s often important to remember that more values may be added to the enum in the future. If you write code that ignores this fact, then you may cause some nasty surprises for yourself or other engineers.</p>
</blockquote>
<p>æ’°å¯«ç¨‹å¼ç¢¼æ™‚å¦‚æœéœ€è¦æ ¹æ“š <code>enum</code> ä¾†é€²è¡Œæ¢ä»¶åˆ†æ”¯ï¼Œæœ¬æ›¸å»ºè­°ä½¿ç”¨ <code>switch()</code> ä¾†æ˜ç¢ºåˆ—å‡ºã€è™•ç†æ¯ä¸€å€‹ <code>enum</code> é …ç›®ã€‚ä¸¦ä¸”è‹¥èªè¨€æœ‰æ”¯æ´çš„è©±ï¼Œè®“ç¨‹å¼ç¢¼åœ¨ã€Œæ²’æœ‰è™•ç†åˆ°æ‰€æœ‰ <code>enum</code> é …ç›®æ™‚æ‹‹éŒ¯ã€æˆ–ç„¡æ³•é€²è¡Œç·¨è­¯ã€ã€‚</p>
<p>TypeScript ç›®å‰å°šæœªæ”¯æ´ã€Œæª¢æŸ¥æ˜¯å¦æ‰€æœ‰çš„ enum é …ç›®éƒ½æœ‰è¢« <code>switch() case</code> ä½¿ç”¨ã€ï¼Œä¸€ç¨®åšæ³•æ˜¯åœ¨ <code>default</code> åˆ†æ”¯ä¸­é€²è¡Œä¾‹å¤–è™•ç†ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">enum</span><span style="color:#B392F0"> user_action</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">  set_user_info</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> 'set_user_info'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">  logout_user</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> 'logout_user'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> reduxUserReducer</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">state</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">action</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  switch</span><span style="color:#E1E4E8"> (action.type) {</span></span>
<span class="line"><span style="color:#F97583">    case</span><span style="color:#E1E4E8"> user_action.set_user_info:</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#E1E4E8"> { </span><span style="color:#F97583">...</span><span style="color:#E1E4E8">state };</span></span>
<span class="line"><span style="color:#F97583">    case</span><span style="color:#E1E4E8"> user_action.logout_user:</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#E1E4E8"> { </span><span style="color:#F97583">...</span><span style="color:#E1E4E8">state };</span></span>
<span class="line"><span style="color:#F97583">    default</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">      throw</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`un-handled user_action::: ${</span><span style="color:#E1E4E8">action</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">type</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="åƒè€ƒæ–‡ä»¶">åƒè€ƒæ–‡ä»¶</h2>
<ul>
<li><a href="https://www.manning.com/books/good-code-bad-code">Manning: Good Code, Bad Code</a></li>
<li><a href="https://lodash.com/">Lodash</a></li>
</ul> </div>   <footer class="footer" data-astro-cid-qlgq3onj>
Tzu Yin (Charlie) ğŸ¦Š Made in Taiwan
</footer>  </section>  </body></html> 