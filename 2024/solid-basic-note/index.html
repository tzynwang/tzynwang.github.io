<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.BScVxmeO.js"></script><!-- Google Tag Manager --><script>(function(){const ga4Id = "G-6QC9CKHCTY";

      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', ga4Id);
    })();</script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=GTM-KM9SGJLK">(function(){const gTagId = "GTM-KM9SGJLK";
})();</script><script>(function(){const ga4Id = "G-6QC9CKHCTY";

      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', ga4Id);
    })();</script><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¦Š</text></svg>"><link rel="sitemap" href="/sitemap-index.xml"><meta name="generator" content="Astro v5.1.2"><!-- Primary Meta Tags --><title>TypeScript å·¥ç¨‹å¸«çš„åŸºç¤ SOLID ç­†è¨˜</title><meta name="title" content="TypeScript å·¥ç¨‹å¸«çš„åŸºç¤ SOLID ç­†è¨˜"><meta name="description" content="æœ€è¿‘åœ¨çœ‹ã€ŠClean Code å­¸æ´¾çš„é¢¨æ ¼å¯¦è¸ï¼šé–‹ç™¼å¯é ã€å¯ç¶­è­·åˆå¼·å¥çš„ JavaScriptã€‹ï¼Œé †ä¾¿æ•´ç†ä¸€ä¸‹ SOLID åœ¨ JS/TS ä¸­çš„æ‡‰ç”¨æ–¹å¼ã€‚"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://tzynwang.github.io/2024/solid-basic-note"><meta property="og:title" content="TypeScript å·¥ç¨‹å¸«çš„åŸºç¤ SOLID ç­†è¨˜"><meta property="og:description" content="æœ€è¿‘åœ¨çœ‹ã€ŠClean Code å­¸æ´¾çš„é¢¨æ ¼å¯¦è¸ï¼šé–‹ç™¼å¯é ã€å¯ç¶­è­·åˆå¼·å¥çš„ JavaScriptã€‹ï¼Œé †ä¾¿æ•´ç†ä¸€ä¸‹ SOLID åœ¨ JS/TS ä¸­çš„æ‡‰ç”¨æ–¹å¼ã€‚"><meta property="og:image" content="https://tzynwang.github.io/2024/solid-basic-note/uve-sanchez-9DRX_cW48RQ-unsplash.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://tzynwang.github.io/2024/solid-basic-note"><meta property="twitter:title" content="TypeScript å·¥ç¨‹å¸«çš„åŸºç¤ SOLID ç­†è¨˜"><meta property="twitter:description" content="æœ€è¿‘åœ¨çœ‹ã€ŠClean Code å­¸æ´¾çš„é¢¨æ ¼å¯¦è¸ï¼šé–‹ç™¼å¯é ã€å¯ç¶­è­·åˆå¼·å¥çš„ JavaScriptã€‹ï¼Œé †ä¾¿æ•´ç†ä¸€ä¸‹ SOLID åœ¨ JS/TS ä¸­çš„æ‡‰ç”¨æ–¹å¼ã€‚"><meta property="twitter:image" content="https://tzynwang.github.io/2024/solid-basic-note/uve-sanchez-9DRX_cW48RQ-unsplash.jpg"><!-- Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet"><style>.tag[data-astro-cid-2iymvi75]{position:relative;display:inline-flex;align-items:center;padding:2px 8px;font-size:14px;font-weight:400;text-decoration:none;background-color:#8aa6a3;color:#fff;transition:background-color .2s ease-in-out}.tag[data-astro-cid-2iymvi75]:not(:last-of-type){margin-right:8px}.tag[data-astro-cid-2iymvi75]:hover{background-color:#127369}
.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}.footer[data-astro-cid-qlgq3onj]{padding:36px;text-align:center}.bottom[data-astro-cid-qlgq3onj]{position:absolute;bottom:0;left:50%;transform:translate(-50%)}.side-content[data-astro-cid-75hifxor],.main-content[data-astro-cid-75hifxor]{margin:24px}nav[data-astro-cid-75hifxor]{display:flex;gap:16px}@media screen and (min-width: 800px){body{height:100vh;display:flex;flex-direction:row;overflow-y:hidden}nav[data-astro-cid-75hifxor]{flex-direction:column}.side-content[data-astro-cid-75hifxor]{flex:0 0 240px}.main-content[data-astro-cid-75hifxor]{margin:0;padding:40px 24px 0;flex:1 1 auto;overflow-y:auto;position:relative}}*{margin:0;padding:0;box-sizing:content-box;font-family:sans-serif;text-wrap:pretty;color:#000000e6}html{background-color:#bfbfbf66}a{color:#127369;font-weight:700;text-decoration:underline;text-decoration-color:transparent;transition:text-decoration-color .2s ease-in-out}a:hover{text-decoration-color:#127369}a.link-out{position:absolute;inset:0}ul,li{list-style-position:inside}ul:not(:has(li)){margin-top:16px;margin-bottom:16px}li{margin-top:4px;margin-bottom:4px;line-height:24px}li li{padding-left:16px}img{display:block;max-width:100%}h1,h2{font-size:28px;line-height:42px;margin:16px 0;color:#4c5958}h3,h4{font-size:22px;line-height:34px;margin:16px 0;color:#4c5958}h5{font-size:18px;line-height:28px;margin:4px 0;color:#4c5958}p{font-size:16px;line-height:24px;margin:16px 0}p code{font-size:14px}blockquote{padding-left:16px;border-left:4px solid #4c5958}blockquote *{font-family:Noto Sans,sans-serif}pre{padding:8px 16px}code,code span{font-family:monospace}hr{width:100%;height:1px;margin:16px 0;background-color:#4c5958}del{color:#4c5958e6}ol>li:has(p)>p{display:inline;margin:0}
.post-container[data-astro-cid-qtokga5y] h1[data-astro-cid-qtokga5y]{margin:0 0 16px}.info[data-astro-cid-qtokga5y]{display:flex;flex-direction:column;gap:8px}.toc-container[data-astro-cid-qtokga5y]{margin-bottom:0}.toc-container[data-astro-cid-qtokga5y]>li[data-astro-cid-qtokga5y]:not(:last-of-type){margin-bottom:4px}.toc-2[data-astro-cid-qtokga5y]{margin-left:1rem}.toc-3[data-astro-cid-qtokga5y]{margin-left:2rem}.toc-4[data-astro-cid-qtokga5y]{margin-left:3rem}.toc-5[data-astro-cid-qtokga5y]{margin-left:4rem}@media screen and (min-width: 800px){.post-container[data-astro-cid-qtokga5y]{max-width:600px}}@media screen and (min-width: 1200px){.post-container[data-astro-cid-qtokga5y]{max-width:720px}}
[data-astro-image]{width:100%;height:auto;object-fit:var(--fit);object-position:var(--pos);aspect-ratio:var(--w) / var(--h)}[data-astro-image=responsive]{max-width:calc(var(--w) * 1px);max-height:calc(var(--h) * 1px)}[data-astro-image=fixed]{width:calc(var(--w) * 1px);height:calc(var(--h) * 1px)}
</style></head> <body> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KM9SGJLK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript> <!-- End Google Tag Manager (noscript) --> <section class="side-content" data-astro-cid-75hifxor> <h1 data-astro-cid-75hifxor>æ™®é€šæ–‡çµ„ 2.0</h1> <nav data-astro-cid-75hifxor> <a href="/" data-astro-cid-75hifxor>é¦–é </a> <a href="/archive" data-astro-cid-75hifxor>å…¨æ–‡ç« æ­¸æª”</a> <a href="/tag" data-astro-cid-75hifxor>ä»¥æ¨™ç±¤æª¢è¦–</a> <a href="/rss.xml" data-astro-cid-75hifxor>RSS</a> </nav> </section> <section class="main-content" data-astro-cid-75hifxor>   <div class="post-container" data-astro-cid-qtokga5y> <h1 data-astro-cid-qtokga5y>TypeScript å·¥ç¨‹å¸«çš„åŸºç¤ SOLID ç­†è¨˜</h1> <div class="info" data-astro-cid-qtokga5y> <span data-astro-cid-qtokga5y>2024-02-21 20:57</span> <span data-astro-cid-qtokga5y><a class="tag" href="/tag/clean code" data-astro-cid-2iymvi75> clean code </a> <a class="tag" href="/tag/Design Patterns" data-astro-cid-2iymvi75> Design Patterns </a> </span> <ul class="toc-container" data-astro-cid-qtokga5y> <li class="toc-2" data-astro-cid-qtokga5y> <a href="#ç°¡ä»‹" data-astro-cid-qtokga5y>ç°¡ä»‹</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#å–®ä¸€åŠŸèƒ½åŸå‰‡-single-responsibility-principle" data-astro-cid-qtokga5y>å–®ä¸€åŠŸèƒ½åŸå‰‡ Single responsibility principle</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#é–‹é–‰åŸå‰‡-openclosed-principle" data-astro-cid-qtokga5y>é–‹é–‰åŸå‰‡ Openâ€“closed principle</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#é åˆ¤ä¿®æ”¹" data-astro-cid-qtokga5y>é åˆ¤ä¿®æ”¹</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#é‡Œæ°æ›¿æ›åŸå‰‡-liskov-substitution-principle" data-astro-cid-qtokga5y>é‡Œæ°æ›¿æ›åŸå‰‡ Liskov substitution principle</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#ä¸åˆé©çš„ç¹¼æ‰¿" data-astro-cid-qtokga5y>ä¸åˆé©çš„ç¹¼æ‰¿</a> </li><li class="toc-3" data-astro-cid-qtokga5y> <a href="#ä½¿ç”¨-ts-çš„-implements-å»ºæ§‹é¡åˆ¥" data-astro-cid-qtokga5y>ä½¿ç”¨ TS çš„ implements å»ºæ§‹é¡åˆ¥</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#ä»‹é¢éš”é›¢åŸå‰‡-interface-segregation-principle" data-astro-cid-qtokga5y>ä»‹é¢éš”é›¢åŸå‰‡ Interface segregation principle</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#ä¾è³´åè½‰åŸå‰‡-dependency-inversion-principle" data-astro-cid-qtokga5y>ä¾è³´åè½‰åŸå‰‡ Dependency inversion principle</a> </li><li class="toc-2" data-astro-cid-qtokga5y> <a href="#åƒè€ƒè³‡æ–™" data-astro-cid-qtokga5y>åƒè€ƒè³‡æ–™</a> </li> </ul> </div> <h2 id="ç°¡ä»‹">ç°¡ä»‹</h2>
<p>SOLID æ˜¯ç‚ºäº†è®“<strong>ç‰©ä»¶å°å‘ç¨‹å¼ç¢¼</strong>èƒ½æ›´å¥½æ‡‚ã€å¥½ç¶­è­·çš„è¨­è¨ˆåŸå‰‡ã€‚è€Œå› ç‚ºæœ‰äº›æ¦‚å¿µä¸å¤ªé©åˆé€éç´” JavaScript å‘ˆç¾ï¼Œæ‰€ä»¥æœ¬ç¯‡ç­†è¨˜æœƒè¦–æƒ…æ³ä½¿ç”¨ JS å’Œ TS ä¾†æ’°å¯«ç¯„ä¾‹ã€‚</p>
<h2 id="å–®ä¸€åŠŸèƒ½åŸå‰‡-single-responsibility-principle">å–®ä¸€åŠŸèƒ½åŸå‰‡ Single responsibility principle</h2>
<ul>
<li>ä¸€å€‹åŠŸèƒ½åªåšä¸€ä»¶äº‹</li>
<li>ä¸€å€‹é¡åˆ¥ï¼ˆclassï¼‰åªå°ˆæ³¨åœ¨ä¸€å€‹ä¸»é¡Œä¸Š</li>
</ul>
<p>çµ‚æ¥µç›®æ¨™æ˜¯æé«˜ä¸€å€‹åŠŸèƒ½çš„å…§èšæ€§ï¼ˆcohesionï¼‰ã€‚</p>
<hr>
<p>é›–ç„¶ä¸åœ¨é€™å€‹åŸå‰‡çš„ç¯„ç–‡å…§ï¼Œä½†åŠŸèƒ½çš„åç¨±èˆ‡å…¶è¡Œç‚ºä¹Ÿè«‹ç¶­æŒä¸€è‡´ï¼Œä¸è¦å¯«åšï¼¡å¯¦ä½œï¼¢ã€‚åä¹‹ï¼Œå¦‚æœæœ‰æ®µéºç•™ç¨‹å¼ç¢¼ï¼ˆlegacy codeï¼‰å¯¦åœ¨å¾ˆé›£ä»¥å–®ä¸€åŠŸèƒ½åŸå‰‡é‡æ§‹ï¼Œå‰‡è‡³å°‘åœ¨åŠŸèƒ½åç¨±ä¸Šå®Œæ•´æè¿°å®ƒçš„è¡Œç‚ºã€‚ä¸è¦çµ¦é–±è®€ã€åŸ·è¡Œç¨‹å¼ç¢¼äººå¸¶ä¾†é©šå–œ<del>é©šåš‡</del> ğŸ¤¡</p>
<h2 id="é–‹é–‰åŸå‰‡-openclosed-principle">é–‹é–‰åŸå‰‡ Openâ€“closed principle</h2>
<p>ä¸€å€‹åŠŸèƒ½æ‡‰åœ¨ã€Œä¸æ”¹å‹•æ—¢æœ‰ç¨‹å¼ç¢¼ã€çš„æƒ…æ³ä¸‹ã€Œå»¶ä¼¸å…¶åŠŸèƒ½ã€ã€‚</p>
<p><img src="/2024/solid-basic-note/Nick-Young-Confused.png" alt="Nick-Young-Confused.png"></p>
<p>å…ˆçœ‹çœ‹ä»¥ä¸‹ç¯„ä¾‹ã€‚ç•¶æˆ‘å€‘éœ€è¦æ–°å¢ä»˜æ¬¾æ–¹å¼æ™‚ï¼Œå¿…é ˆç›´æ¥èª¿æ•´ <code>handlePayment</code> å…§å®¹â€”â€”æ–°å¢ä¸€çµ„ <code>case</code>ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> handlePayment</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">method</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  switch</span><span style="color:#E1E4E8"> (method) {</span></span>
<span class="line"><span style="color:#F97583">    case</span><span style="color:#9ECBFF"> 'atm'</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">      // ...</span></span>
<span class="line"><span style="color:#F97583">      break</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    case</span><span style="color:#9ECBFF"> 'credit-card'</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">      // ...</span></span>
<span class="line"><span style="color:#F97583">      break</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    default</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>è€Œç‚ºäº†è®“ç¨‹å¼ç¢¼ç¬¦åˆé–‹é–‰åŸå‰‡ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ TS ä¾†é€²è¡Œé‡æ§‹ã€‚</p>
<p>é¦–å…ˆå®šç¾© <code>abstract class PaymentHandler</code> è®“ã€Œè² è²¬å¯¦ä½œä»˜æ¬¾åŠŸèƒ½çš„é¡åˆ¥ã€éƒ½æœ‰ <code>method processPayment</code> èƒ½å‘¼å«ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">abstract</span><span style="color:#F97583"> class</span><span style="color:#B392F0"> PaymentHandler</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#F97583">  abstract</span><span style="color:#B392F0"> processPayment</span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> () </span><span style="color:#F97583">=></span><span style="color:#79B8FF"> void</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>æ¥è‘—é€é <code>implements PaymentHandler</code> å¯¦ä½œå‡º <code>AtmPayment</code> èˆ‡ <code>CreditCardpayment</code>ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> AtmPayment</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> PaymentHandler</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  processPayment</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> CreditCardpayment</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> PaymentHandler</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  processPayment</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#6A737D">    // ...</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>ç”± <code>enum paymentMethods</code> ä¾†æ±ºå®šã€Œç›®å‰å…è¨±çš„ä»˜æ¬¾æ–¹å¼ã€ï¼Œä¸¦åœ¨<code>class Payment</code> ä¸­é€é <code>handlePayment</code> ä¾†å–å¾—å°æ‡‰çš„ä»˜æ¬¾åŠŸèƒ½ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">enum</span><span style="color:#B392F0"> paymentMethods</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#79B8FF">  atm</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> 'atm'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">  creditCard</span><span style="color:#F97583"> =</span><span style="color:#9ECBFF"> 'creditCard'</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> Payments</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  [</span><span style="color:#B392F0">key</span><span style="color:#F97583"> in</span><span style="color:#B392F0"> paymentMethods</span><span style="color:#E1E4E8">]</span><span style="color:#F97583">:</span><span style="color:#B392F0"> PaymentHandler</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> Payment</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  payments</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Payments</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">arg</span><span style="color:#F97583">:</span><span style="color:#B392F0"> Payments</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.payments </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> arg;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  handlePayment</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">method</span><span style="color:#F97583">:</span><span style="color:#B392F0"> paymentMethods</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    const</span><span style="color:#79B8FF"> fn</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.payments[method].processPayment;</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">!</span><span style="color:#E1E4E8">fn) </span><span style="color:#F97583">throw</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">`payment method not allow::: ${</span><span style="color:#E1E4E8">method</span><span style="color:#9ECBFF">}`</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#B392F0">    fn</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>å¯¦éš›ä½¿ç”¨ <code>class Payment</code> æ™‚ï¼Œé€éä¾è³´æ³¨å…¥ï¼ˆdependency injectionï¼‰ä¾†æä¾›ã€Œå¯¦ä½œäº†å„ç¨®ä»˜æ¬¾æ–¹å¼çš„é¡åˆ¥ã€ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> paymentHandlers</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  atm: </span><span style="color:#F97583">new</span><span style="color:#B392F0"> AtmPayment</span><span style="color:#E1E4E8">(),</span></span>
<span class="line"><span style="color:#E1E4E8">  creditCard: </span><span style="color:#F97583">new</span><span style="color:#B392F0"> CreditCardpayment</span><span style="color:#E1E4E8">(),</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">const</span><span style="color:#79B8FF"> P</span><span style="color:#F97583"> =</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Payment</span><span style="color:#E1E4E8">(paymentHandlers);</span></span></code></pre>
<p>æœªä¾†åœ¨æ–°å¢ä»˜æ¬¾æ–¹å¼æ™‚ï¼Œéœ€è¦ä¿®æ”¹çš„éƒ¨ä½è®Šæˆï¼š</p>
<ul>
<li><code>enum paymentMethods</code></li>
<li><code>const paymentHandlers</code></li>
<li>æ–°å¢ <code>implements PaymentHandler</code> çš„ä»˜æ¬¾é¡åˆ¥</li>
</ul>
<h3 id="é åˆ¤ä¿®æ”¹">é åˆ¤ä¿®æ”¹</h3>
<p>å•ï¼šè·ŸåŸæœ¬çš„ JS ç‰ˆæ¯”èµ·ä¾†ï¼Œé‡æ§‹å¾Œå¤šå¯«äº†ä¸å°‘ç¨‹å¼ç¢¼ã€‚éµå®ˆé–‹é–‰åŸå‰‡çš„å¥½è™•åˆ°åº•æ˜¯ä»€éº¼ï¼Ÿ</p>
<p>ç­”ï¼šæ­¤åŸå‰‡çš„é‡é»æ˜¯ã€Œç¨‹å¼ç¢¼è¦èƒ½å½ˆæ€§å°æ‡‰æ—¥å¾Œçš„æ“´å……éœ€æ±‚ã€ï¼Œå€‹äººèªç‚ºã€Œä¸¦ä¸æ˜¯æ‰€æœ‰åŠŸèƒ½éƒ½é©åˆä»¥é–‹é–‰åŸå‰‡æ’°å¯«ã€ã€‚</p>
<p>å‡è¨­æˆ‘å¾ˆé›£æƒ³åƒé€™å€‹åŠŸèƒ½æœªä¾†çš„æ“´å……å…§å®¹ï¼Œå®ƒæˆ–è¨±å°±ä¸æ˜¯é–‹é–‰åŸå‰‡çš„ç†æƒ³å°è±¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ç¾åœ¨éœ€è¦ã€Œä¿®æ”¹ä¸€æ®µæ—¢æœ‰çš„ç¨‹å¼ç¢¼ï¼Œç‚ºå®ƒåŠ å…¥æ–°åŠŸèƒ½ã€ï¼Œé‚£æˆ‘å°±æ‡‰è©²è€ƒæ…®åœ¨é€™æ¬¡ä¿®æ”¹ä¸­ä»¥é–‹é–‰åŸå‰‡é‡æ§‹ç›¸é—œæ®µè½ã€‚</p>
<h2 id="é‡Œæ°æ›¿æ›åŸå‰‡-liskov-substitution-principle">é‡Œæ°æ›¿æ›åŸå‰‡ Liskov substitution principle</h2>
<p>å‡è¨­æœ‰ä¸€å€‹é¡åˆ¥ï¼¸èˆ‡ç¹¼æ‰¿ï¼¸çš„å­é¡åˆ¥ï¼¹ï¼ŒæŠŠæ‰€æœ‰çš„ï¼¸ä»¥ï¼¹æ›¿ä»£å¾Œï¼Œç¨‹å¼ç¢¼æ‡‰ç¹¼çºŒæ­£å¸¸é‹è¡Œã€‚</p>
<h3 id="ä¸åˆé©çš„ç¹¼æ‰¿">ä¸åˆé©çš„ç¹¼æ‰¿</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€å€‹é•ååŸå‰‡çš„ JS ç¯„ä¾‹ã€‚é¡åˆ¥ã€Œä¼éµã€é›–ç„¶ç¹¼æ‰¿è‡ªé¡åˆ¥ã€Œé³¥ã€ï¼Œä½†ä¼éµè¦†è“‹äº† <code>fly</code> çš„å…§å®¹ï¼Œå°è‡´æ­¤åŠŸèƒ½ç”¢ç”Ÿæ„æ–™å¤–çš„çµæœã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> Bird</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  name</span><span style="color:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">  constructor</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">name</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.name </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> name;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  fly</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#9ECBFF"> `${</span><span style="color:#79B8FF">this</span><span style="color:#9ECBFF">.</span><span style="color:#E1E4E8">name</span><span style="color:#9ECBFF">} is flying.`</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> Penguin</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> Bird</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  fly</span><span style="color:#E1E4E8">() {</span></span>
<span class="line"><span style="color:#F97583">    throw</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> Error</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">'Penguin can not fly.'</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>é›–ç„¶ TS æœƒç›´æ¥åœ¨ <code>class Penguin extends Bird</code> å ±éŒ¯ï¼ˆ<code>Property 'fly' in type 'Penguin' is not assignable to the same property in base type 'Bird'.</code>ï¼‰ï¼Œä½†å·¥ç¨‹å¸«ä¹Ÿæ‡‰è©²æ€è€ƒâ€”â€”å¦‚æœ <code>class Penguin</code> ä¸æ‡‰è©²æœ‰ <code>fly</code> åŠŸèƒ½ï¼Œç¹¼æ‰¿ <code>class Bird</code> çœŸçš„åˆç†å—ï¼Ÿ</p>
<h3 id="ä½¿ç”¨-ts-çš„-implements-å»ºæ§‹é¡åˆ¥">ä½¿ç”¨ TS çš„ <code>implements</code> å»ºæ§‹é¡åˆ¥</h3>
<p>æ­¤é—œéµå­—æœƒå¹«å¿™æª¢æŸ¥æŸé¡åˆ¥æ˜¯å¦æœ‰æ ¹æ“šå®ƒ <code>implements</code> çš„ä»‹é¢é€²è¡Œå¯¦ä½œï¼ˆåƒé–±<a href="https://www.typescriptlang.org/docs/handbook/2/classes.html#implements-clauses">å®˜æ–¹æ–‡ä»¶</a>ï¼‰ã€‚é€™èƒ½è®“å·¥ç¨‹å¸«æœ‰æ„è­˜åœ°å»è™•ç†æ¯ä¸€å€‹å­é¡åˆ¥çš„å…§å®¹ã€‚</p>
<p>å¯åƒè€ƒä»¥ä¸‹ç¯„ä¾‹â€”â€”ä½¿ç”¨ <code>extends</code> çš„ <code>class BlackFridayStrategy1</code> æœƒç›´æ¥ç¹¼æ‰¿ <code>class PriceStrategy</code> å¯¦ä½œå¥½çš„ <code>getPrice</code> åŠŸèƒ½ï¼Œä½†æ²’æœ‰å¯¦ä½œ <code>getPrice</code> çš„ <code>BlackFridayStrategy2</code> è®“ TS å™´éŒ¯äº†ï¼ˆ<code>Class 'BlackFridayStrategy2' incorrectly implements class 'PriceStrategy'. Property 'getPrice' is missing in type 'BlackFridayStrategy2' but required in type 'PriceStrategy'.</code>ï¼‰ã€‚</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> PriceStrategy</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#B392F0">  getPrice</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">p</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> p;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> BlackFridayStrategy1</span><span style="color:#F97583"> extends</span><span style="color:#B392F0"> PriceStrategy</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  // nothing happen</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">class</span><span style="color:#B392F0"> BlackFridayStrategy2</span><span style="color:#F97583"> implements</span><span style="color:#B392F0"> PriceStrategy</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  // oops TS is yelling</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="ä»‹é¢éš”é›¢åŸå‰‡-interface-segregation-principle">ä»‹é¢éš”é›¢åŸå‰‡ Interface segregation principle</h2>
<ul>
<li>ä¸€å€‹åŠŸèƒ½ä¸æ‡‰è¢«è¿«æ¥å—å®ƒç”¨ä¸åˆ°çš„æ±è¥¿</li>
<li>ç²¾ç¢º > æ”çµ±ï¼ˆåƒæ•¸ã€å‹åˆ¥çš†æ˜¯ï¼‰</li>
</ul>
<p>ä¸è‰¯ç¤ºç¯„ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> PaymentArgs</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  amount</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  cardNo</span><span style="color:#F97583">?:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  cardValidateNo</span><span style="color:#F97583">?:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  cardHolderName</span><span style="color:#F97583">?:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  bankNo</span><span style="color:#F97583">?:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> handleCreditCardPayment</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">arg</span><span style="color:#F97583">:</span><span style="color:#B392F0"> PaymentArgs</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  // no needs for bankNo...</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> handleBankPayment</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">arg</span><span style="color:#F97583">:</span><span style="color:#B392F0"> PaymentArgs</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  // no needs for credit card related args...</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>ç†æƒ³ç‹€æ…‹ï¼š</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ts"><code><span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> BasePaymentArg</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  amount</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> number</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> CreditCardPaymentArgs</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> BasePaymentArg</span><span style="color:#F97583"> &#x26;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  cardNo</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  cardValidateNo</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#FFAB70">  cardHolderName</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">type</span><span style="color:#B392F0"> BankPaymentArgs</span><span style="color:#F97583"> =</span><span style="color:#B392F0"> BasePaymentArg</span><span style="color:#F97583"> &#x26;</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#FFAB70">  bankNo</span><span style="color:#F97583">:</span><span style="color:#79B8FF"> string</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> handleCreditCardPayment</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">arg</span><span style="color:#F97583">:</span><span style="color:#B392F0"> CreditCardPaymentArgs</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  //</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">function</span><span style="color:#B392F0"> handleBankPayment</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">arg</span><span style="color:#F97583">:</span><span style="color:#B392F0"> BankPaymentArgs</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  //</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<p>åœ¨ <a href="/2023/the-art-of-unit-testing-ch4-interaction-testing-using-mock-objects#interface-segregation-principle-i-from-solid">4 Interaction testing using mock objects#Interface segregation principle (I from SOLID)</a> ä¹Ÿæœ‰æéæ­¤æ¦‚å¿µã€‚åœ¨æ’°å¯«å–®å…ƒæ¸¬è©¦æ™‚ï¼Œå·¥ç¨‹å¸«ä¸æ‡‰è¢«å¼·è¿«ä½¿ç”¨ä»–ç”¨ä¸åˆ°çš„åŠŸèƒ½ã€‚</p>
<h2 id="ä¾è³´åè½‰åŸå‰‡-dependency-inversion-principle">ä¾è³´åè½‰åŸå‰‡ Dependency inversion principle</h2>
<p>ä¸è¦å¯«æ­»å¯¦ä½œå…§å®¹ï¼Œè€Œæ˜¯ä½¿ç”¨æŠ½è±¡å±¤ä¾†ä»‹æ¥é«˜ã€ä½å±¤æ¬¡çš„åŠŸèƒ½ã€‚çµ‚æ¥µç›®æ¨™æ˜¯é™ä½åŠŸèƒ½ä¹‹é–“çš„è€¦åˆæ€§ï¼ˆcouplingï¼‰ã€‚</p>
<p>å¯¦ä½œå¯åƒè€ƒ <a href="/2023/the-art-of-unit-testing-ch3-breaking-dependencies-with-stubs#331-stubbing-out-time-with-parameter-injection">3 Breaking dependencies with stubs#3.3.1 Stubbing out time with parameter injection</a> å±•ç¤ºéçš„å…§å®¹ã€‚</p>
<h2 id="åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™</h2>
<ul>
<li><a href="https://www.tenlong.com.tw/products/9789864345700">Clean Code å­¸æ´¾çš„é¢¨æ ¼å¯¦è¸ï¼šé–‹ç™¼å¯é ã€å¯ç¶­è­·åˆå¼·å¥çš„ JavaScriptï¼ˆç¬¬å››ç« ï¼‰</a></li>
<li><a href="https://www.youtube.com/watch?v=vE74gnv4VlY">YouTube: The Right way to write Nest.js &#x26; Typescript clean-code - SOLID</a></li>
<li><a href="https://stackoverflow.com/questions/38834625/whats-the-difference-between-extends-and-implements-in-typescript">Whatâ€™s the difference between â€˜extendsâ€™ and â€˜implementsâ€™ in TypeScript</a></li>
</ul> </div>   <footer class="footer" data-astro-cid-qlgq3onj>
Tzu Yin (Charlie) ğŸ¦Š Made in Taiwan
</footer>  </section>  </body></html> 