---
import type { PostYear } from '@Models/GeneralTypes';
import { dirname, sep } from 'path';
import { fileURLToPath } from 'url';
import SinglePostLayout from '@Components/pages/SinglePostLayout.astro';
import { getPublishedPostsOfThisYear } from '@Tools/post';

export async function getStaticPaths() {
  const dirYearPath = dirname(fileURLToPath(import.meta.url));
  const dirYear = dirYearPath.split(sep).pop() as PostYear;
  return getPublishedPostsOfThisYear(dirYear);
}

const { entry } = Astro.props;
const { Content, headings } = await entry.render();
---

<SinglePostLayout entry={entry} Content={Content} headings={headings} />
